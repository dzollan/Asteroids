!function(t){var e={};function a(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=3)}([function(t,e,a){t.exports=a.p+"e569b1a6ba86f00efe1e81a5cdd8814c.wav"},function(t,e,a){t.exports=a.p+"695e9c21fc19802164a6976bcfb1735f.flac"},function(t,e,a){t.exports=a.p+"c0f9903e85f2264a5e9116b5e224cd61.wav"},function(t,e,a){"use strict";a.r(e);var r=a(0),s=a.n(r),i=a(1),h=a.n(i),n=a(2),o=a.n(n);const l=60,c=2,u=2,M=.6,f=350,d=50,y=4,m=120,x=150,v=10,p=.1,g=.3,b=3,w=30,k=10,T=360,P=2,S=40,N=1;var I,O,j,_,q,C,A,B=document.getElementById("gameCanvas"),E=B.getContext("2d"),R=new U(s.a,1,.8,1),W=new U(h.a,5,1,2),L=new U(o.a,8,.2);function G(t){var e=j[t].x,a=j[t].y,r=j[t].r;r==Math.ceil(m/2)?(j.push(H(e,a,Math.ceil(m/4))),j.push(H(e,a,Math.ceil(m/4))),_+=d):r==Math.ceil(m/4)?(j.push(H(e,a,Math.ceil(m/8))),j.push(H(e,a,Math.ceil(m/8))),_+=d):_+=d,W.play(),j.splice(t,1),0==j.length&&(I++,K())}function z(t,e,a,r){return Math.sqrt(Math.pow(a-t,2)+Math.pow(r-e,2))}function D(t,e,a,r="white"){E.strokeStyle=r,E.fillStyle=r,E.lineWidth=w/20,E.beginPath(),E.moveTo(t+5/3*q.r*Math.cos(a),e-5/3*q.r*Math.sin(a)),E.lineTo(t-q.r*(Math.cos(a)+Math.sin(a)),e+q.r*(Math.sin(a)-Math.cos(a))),E.lineTo(t-q.r*(Math.cos(a)-Math.sin(a)),e+q.r*(Math.sin(a)+Math.cos(a))),E.closePath(),E.fill(),E.stroke()}function F(){q.explodeTime=Math.ceil(g*l),R.play()}function H(t,e,a){var r=1+.1*I;return{x:t,y:e,xv:Math.random()*x*r/l*(Math.random()<.5?1:-1),yv:Math.random()*x*r/l*(Math.random()<.5?1:-1),a:Math.random()*Math.PI*2,r:a,m:a*((Math.random()+3)/4)*N,vert:Math.floor(Math.random()*(v+1)+v/2)}}function J(){I=0,O=u,_=0,q=Q(),K()}function K(){C="Round "+(I+1),A=1,function(){var t,e;j=[],7*(y+I);for(var a=0;a<y+I;a++){do{t=Math.floor(Math.random()*B.width),e=Math.floor(Math.random()*B.height)}while(z(q.x,q.y,t,e)<2*m+q.r);j.push(H(t,e,Math.ceil(m/2)))}}()}function Q(){return{x:B.width/2,y:B.height/2,a:.5*Math.PI,r:w/2,blinkNum:Math.ceil(b/p),blinkTime:Math.ceil(p*l),canShoot:!0,dead:!1,explodeTime:0,lasers:[],rot:0,thrusting:!1,thrust:{x:0,y:0}}}function U(t,e=1,a=1,r=1){this.streamNum=0,this.streams=[];for(var s=0;s<e;s++)this.streams.push(new Audio(t)),this.streams[s].volume=a,this.streams[s].playbackRate=r;this.play=function(){this.streamNum=(this.streamNum+1)%e,this.streams[this.streamNum].play()},this.stop=function(){this.streams[this.streamNum].pause(),this.streams[this.streamNum].currentTime=0}}function V(t,e){var a,r,s,i,h,n,o;(function(t,e){var a=[e.xv-t.xv,e.yv-t.yv],r=[e.x-t.x,e.y-t.y];return!(a[0]*r[0]+a[1]*r[1]>0)})(t,e)&&(a=Math.sqrt(Math.pow(t.xv,2)+Math.pow(t.yv,2)),r=Math.sqrt(Math.pow(e.xv,2)+Math.pow(e.yv,2)),s=Math.atan2(e.y-t.y,e.x-t.x),i=(a*Math.cos(t.a-s)*(t.m-e.m)+2*e.m*r*Math.cos(e.a-s))/(t.m+e.m)*Math.cos(s)+a*Math.sin(t.a-s)*Math.sin(s),h=(a*Math.cos(t.a-s)*(t.m-e.m)+2*e.m*r*Math.cos(e.a-s))/(t.m+e.m)*Math.sin(s)+a*Math.sin(t.a-s)*Math.cos(s),n=(r*Math.cos(e.a-s)*(e.m-t.m)+2*t.m*a*Math.cos(t.a-s))/(e.m+t.m)*Math.cos(s)+r*Math.sin(e.a-s)*Math.sin(s),o=(r*Math.cos(e.a-s)*(e.m-t.m)+2*t.m*a*Math.cos(t.a-s))/(e.m+t.m)*Math.sin(s)+r*Math.sin(e.a-s)*Math.cos(s),t.xv=i,t.yv=h,e.xv=n,e.yv=o)}J(),document.addEventListener("keydown",function(t){if(q.dead)return;switch(t.keyCode){case 32:!function(){q.canShoot&&(q.lasers.push({x:q.x+4/3*q.r*Math.cos(q.a),y:q.y-4/3*q.r*Math.sin(q.a),xv:f*Math.cos(q.a)/l,yv:-f*Math.sin(q.a)/l,dist:0}),L.play());q.canShoot=!1}();break;case 37:q.rot=T/180*Math.PI/l;break;case 38:q.thrusting=!0;break;case 39:q.rot=-T/180*Math.PI/l;break;case 86:q.x=Math.floor(Math.random()*B.width),q.y=Math.floor(Math.random()*B.height),!0}}),document.addEventListener("keyup",function(t){if(q.dead)return;switch(t.keyCode){case 32:q.canShoot=!0;break;case 37:q.rot=0;break;case 38:q.thrusting=!1;break;case 39:q.rot=0}}),setInterval(function(){var t,e,a,r,s,i,h,n,o,u,f,d,y,m,x,v,g,b=q.blinkNum%2==0,T=q.explodeTime>0;E.fillStyle="black",E.fillRect(0,0,B.width,B.height);for(var N=0;N<j.length;N++){E.strokeStyle="slategrey",E.fillStyle="slategrey",E.lineWidth=w/20,t=j[N].a,e=j[N].r,a=j[N].x,r=j[N].y,s=j[N].vert,E.beginPath(),E.moveTo(a+e*Math.cos(t),r+e*Math.sin(t));for(var I=1;I<s;I++)E.lineTo(a+e*Math.cos(t+I*Math.PI*2/s),r+e*Math.sin(t+I*Math.PI*2/s));E.closePath(),E.fill(),E.stroke()}q.thrusting&&!q.dead?(q.thrust.x+=k*Math.cos(q.a)/l,q.thrust.y-=k*Math.sin(q.a)/l,!T&&b&&(E.fillStyle="white",E.strokeStyle="red",E.lineWidth=3,E.beginPath(),E.moveTo(q.x-q.r*(Math.cos(q.a)+.5*Math.sin(q.a)),q.y+q.r*(Math.sin(q.a)-.5*Math.cos(q.a))),E.lineTo(q.x-10*q.r/3*Math.cos(q.a),q.y+10*q.r/3*Math.sin(q.a)),E.lineTo(q.x-q.r*(Math.cos(q.a)-.5*Math.sin(q.a)),q.y+q.r*(Math.sin(q.a)+.5*Math.cos(q.a))),E.closePath(),E.fill(),E.stroke())):(q.thrust.x-=c*q.thrust.x/l,q.thrust.y-=c*q.thrust.y/l);T||(b&&!q.dead&&D(q.x,q.y,q.a),q.blinkNum>0&&(q.blinkTime--,0==q.blinkTime&&(q.blinkTime=Math.ceil(p*l),q.blinkNum--)));for(var N=0;N<q.lasers.length;N++)E.fillStyle="red",E.beginPath(),E.arc(q.lasers[N].x,q.lasers[N].y,w/15,0,2*Math.PI,!1),E.fill();A>=0?(E.textAlign="center",E.textBaseline="middle",E.fillStyle="rgba(255, 255, 255, "+A+")",E.font=S+"px arial",E.fillText(C,B.width/2,.75*B.height),A-=1/P/l):q.dead&&J();for(var N=0;N<O;N++)i=T&&N==O-1?"red":"white",D(w+N*w*1.2,w,.5*Math.PI,i);E.textAlign="right",E.textBaseline="middle",E.fillStyle="white",E.font=S+"px arial",E.fillText(_,B.width-w/2,w);for(var N=j.length-1;N>=0;N--){h=j[N].x,n=j[N].y,o=j[N].r;for(var I=q.lasers.length-1;I>=0;I--)u=q.lasers[I].x,f=q.lasers[I].y,z(h,n,u,f)<o&&(G(N),q.lasers.splice(I,1))}for(var N=0;N<j.length;N++){d=j[N].x,y=j[N].y,m=j[N].r;for(var I=0;I<j.length;I++)N!=I&&(x=j[I].x,v=j[I].y,g=j[I].r,z(d,y,x,v)<m+g&&z(d,y,x,v)>m+g-3&&V(j[N],j[I]))}if(T)q.explodeTime--,0==q.explodeTime&&(--O<0?(q.dead=!0,C="Game Over",A=1):q=Q());else{if(0==q.blinkNum&&!q.dead)for(var N=0;N<j.length;N++)if(z(q.x,q.y,j[N].x,j[N].y)<q.r+j[N].r){F(),G(N);break}q.a+=q.rot,q.x+=q.thrust.x,q.y+=q.thrust.y}q.x<0-q.r?q.x=B.width+q.r:q.x>B.width+q.r&&(q.x=0-q.r);q.y<0-q.r?q.y=B.height+q.r:q.y>B.height+q.r&&(q.y=0-q.r);for(var N=q.lasers.length-1;N>=0;N--)q.lasers[N].dist>M*B.width?q.lasers.splice(N,1):(q.lasers[N].x+=q.lasers[N].xv,q.lasers[N].y+=q.lasers[N].yv,q.lasers[N].dist+=Math.sqrt(Math.pow(q.lasers[N].xv,2)+Math.pow(q.lasers[N].yv,2)),q.lasers[N].x<0?q.lasers[N].x=B.width:q.lasers[N].x>B.width&&(q.lasers[N].x=0),q.lasers[N].y<0?q.lasers[N].y=B.height:q.lasers[N].y>B.height&&(q.lasers[N].y=0));for(var N=0;N<j.length;N++)j[N].x+=j[N].xv,j[N].y+=j[N].yv,j[N].x<0-j[N].r?j[N].x=B.width+j[N].r:j[N].x>B.width+j[N].r&&(j[N].x=0-j[N].r),j[N].y<0-j[N].r?j[N].y=B.height+j[N].r:j[N].y>B.height+j[N].r&&(j[N].y=0-j[N].r)},1e3/l)}]);