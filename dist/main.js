!function(t){var a={};function e(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var i in t)e.d(r,i,function(a){return t[a]}.bind(null,i));return r},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=0)}([function(t,a){const e=60,r=2,i=2,h=.6,s=350,n=50,o=4,l=120,c=150,M=10,u=.1,y=.3,d=3,v=30,m=10,f=360,x=2,p=40,g=1;var b,w,k,T,P,S,N,I=document.getElementById("gameCanvas"),O=I.getContext("2d"),j=new z("../src/explode.wav",1,.8,1),_=new z("../src/hit.flac",5,1,2),q=new z("../src/laser.wav",8,.2);function C(t){var a=k[t].x,e=k[t].y,r=k[t].r;r==Math.ceil(l/2)?(k.push(R(a,e,Math.ceil(l/4))),k.push(R(a,e,Math.ceil(l/4))),T+=n):r==Math.ceil(l/4)?(k.push(R(a,e,Math.ceil(l/8))),k.push(R(a,e,Math.ceil(l/8))),T+=n):T+=n,_.play(),k.splice(t,1),console.log(k.length+" astroids remaining"),0==k.length&&(b++,L())}function A(t,a,e,r){return Math.sqrt(Math.pow(e-t,2)+Math.pow(r-a,2))}function B(t,a,e,r="white"){O.strokeStyle=r,O.fillStyle=r,O.lineWidth=v/20,O.beginPath(),O.moveTo(t+5/3*P.r*Math.cos(e),a-5/3*P.r*Math.sin(e)),O.lineTo(t-P.r*(Math.cos(e)+Math.sin(e)),a+P.r*(Math.sin(e)-Math.cos(e))),O.lineTo(t-P.r*(Math.cos(e)-Math.sin(e)),a+P.r*(Math.sin(e)+Math.cos(e))),O.closePath(),O.fill(),O.stroke()}function E(){P.explodeTime=Math.ceil(y*e),j.play()}function R(t,a,r){var i=1+.1*b;return{x:t,y:a,xv:Math.random()*c*i/e*(Math.random()<.5?1:-1),yv:Math.random()*c*i/e*(Math.random()<.5?1:-1),a:Math.random()*Math.PI*2,r:r,m:r*((Math.random()+3)/4)*g,vert:Math.floor(Math.random()*(M+1)+M/2),timer:0}}function W(){b=0,w=i,T=0,P=G(),L()}function L(){S="Round "+(b+1),N=1,function(){var t,a;k=[],7*(o+b);for(var e=0;e<o+b;e++){do{t=Math.floor(Math.random()*I.width),a=Math.floor(Math.random()*I.height)}while(A(P.x,P.y,t,a)<2*l+P.r);k.push(R(t,a,Math.ceil(l/2)))}}()}function G(){return{x:I.width/2,y:I.height/2,a:.5*Math.PI,r:v/2,blinkNum:Math.ceil(d/u),blinkTime:Math.ceil(u*e),canShoot:!0,dead:!1,explodeTime:0,lasers:[],rot:0,thrusting:!1,thrust:{x:0,y:0}}}function z(t,a=1,e=1,r=1){this.streamNum=0,this.streams=[];for(var i=0;i<a;i++)this.streams.push(new Audio(t)),this.streams[i].volume=e,this.streams[i].playbackRate=r;this.play=function(){this.streamNum=(this.streamNum+1)%a,this.streams[this.streamNum].play()},this.stop=function(){this.streams[this.streamNum].pause(),this.streams[this.streamNum].currentTime=0}}function D(t,a){t.timer>0||a.timer>0||function(t,a){return rv=[a.xv-t.xv,a.yv-t.yv],dv=[a.x-t.x,a.y-t.y],result=rv[0]*dv[0]+rv[1]*dv[1],!(result>0)}(t,a)&&(v1=Math.sqrt(Math.pow(t.xv,2)+Math.pow(t.yv,2)),v2=Math.sqrt(Math.pow(a.xv,2)+Math.pow(a.yv,2)),phi=Math.atan2(a.y-t.y,a.x-t.x),v1x=(v1*Math.cos(t.a-phi)*(t.m-a.m)+2*a.m*v2*Math.cos(a.a-phi))/(t.m+a.m)*Math.cos(phi)+v1*Math.sin(t.a-phi)*Math.sin(phi),v1y=(v1*Math.cos(t.a-phi)*(t.m-a.m)+2*a.m*v2*Math.cos(a.a-phi))/(t.m+a.m)*Math.sin(phi)+v1*Math.sin(t.a-phi)*Math.cos(phi),v2x=(v2*Math.cos(a.a-phi)*(a.m-t.m)+2*t.m*v1*Math.cos(t.a-phi))/(a.m+t.m)*Math.cos(phi)+v2*Math.sin(a.a-phi)*Math.sin(phi),v2y=(v2*Math.cos(a.a-phi)*(a.m-t.m)+2*t.m*v1*Math.cos(t.a-phi))/(a.m+t.m)*Math.sin(phi)+v2*Math.sin(a.a-phi)*Math.cos(phi),t.xv=v1x,t.yv=v1y,a.xv=v2x,a.yv=v2y)}W(),document.addEventListener("keydown",function(t){if(P.dead)return;switch(t.keyCode){case 32:!function(){P.canShoot&&(P.lasers.push({x:P.x+4/3*P.r*Math.cos(P.a),y:P.y-4/3*P.r*Math.sin(P.a),xv:s*Math.cos(P.a)/e,yv:-s*Math.sin(P.a)/e,dist:0}),q.play());P.canShoot=!1}();break;case 37:P.rot=f/180*Math.PI/e;break;case 38:P.thrusting=!0;break;case 39:P.rot=-f/180*Math.PI/e;break;case 86:P.x=Math.floor(Math.random()*I.width),P.y=Math.floor(Math.random()*I.height),!0}}),document.addEventListener("keyup",function(t){if(P.dead)return;switch(t.keyCode){case 32:P.canShoot=!0;break;case 37:P.rot=0;break;case 38:P.thrusting=!1;break;case 39:P.rot=0}}),setInterval(function(){var t,a,i,s,n,o,l,c,M,y,d,f=P.blinkNum%2==0,g=P.explodeTime>0;O.fillStyle="black",O.fillRect(0,0,I.width,I.height);for(var b=0;b<k.length;b++){O.strokeStyle="slategrey",O.fillStyle="slategrey",O.lineWidth=v/20,t=k[b].a,a=k[b].r,i=k[b].x,s=k[b].y,n=k[b].vert,O.beginPath(),O.moveTo(i+a*Math.cos(t),s+a*Math.sin(t));for(var j=1;j<n;j++)O.lineTo(i+a*Math.cos(t+j*Math.PI*2/n),s+a*Math.sin(t+j*Math.PI*2/n));O.closePath(),O.fill(),O.stroke()}P.thrusting&&!P.dead?(P.thrust.x+=m*Math.cos(P.a)/e,P.thrust.y-=m*Math.sin(P.a)/e,!g&&f&&(O.fillStyle="white",O.strokeStyle="red",O.lineWidth=3,O.beginPath(),O.moveTo(P.x-P.r*(Math.cos(P.a)+.5*Math.sin(P.a)),P.y+P.r*(Math.sin(P.a)-.5*Math.cos(P.a))),O.lineTo(P.x-10*P.r/3*Math.cos(P.a),P.y+10*P.r/3*Math.sin(P.a)),O.lineTo(P.x-P.r*(Math.cos(P.a)-.5*Math.sin(P.a)),P.y+P.r*(Math.sin(P.a)+.5*Math.cos(P.a))),O.closePath(),O.fill(),O.stroke())):(P.thrust.x-=r*P.thrust.x/e,P.thrust.y-=r*P.thrust.y/e);g||(f&&!P.dead&&B(P.x,P.y,P.a),P.blinkNum>0&&(P.blinkTime--,0==P.blinkTime&&(P.blinkTime=Math.ceil(u*e),P.blinkNum--)));for(var b=0;b<P.lasers.length;b++)O.fillStyle="red",O.beginPath(),O.arc(P.lasers[b].x,P.lasers[b].y,v/15,0,2*Math.PI,!1),O.fill();N>=0?(O.textAlign="center",O.textBaseline="middle",O.fillStyle="rgba(255, 255, 255, "+N+")",O.font=p+"px arial",O.fillText(S,I.width/2,.75*I.height),N-=1/x/e):P.dead&&W();for(var b=0;b<w;b++)o=g&&b==w-1?"red":"white",B(v+b*v*1.2,v,.5*Math.PI,o);O.textAlign="right",O.textBaseline="middle",O.fillStyle="white",O.font=p+"px arial",O.fillText(T,I.width-v/2,v);for(var b=k.length-1;b>=0;b--){l=k[b].x,c=k[b].y,M=k[b].r;for(var j=P.lasers.length-1;j>=0;j--)y=P.lasers[j].x,d=P.lasers[j].y,A(l,c,y,d)<M&&(C(b),P.lasers.splice(j,1))}for(var b=0;b<k.length;b++){a1x=k[b].x,a1y=k[b].y,a1r=k[b].r;for(var j=0;j<k.length;j++)b!=j&&(a2x=k[j].x,a2y=k[j].y,a2r=k[j].r,A(a1x,a1y,a2x,a2y)<a1r+a2r&&A(a1x,a1y,a2x,a2y)>a1r+a2r-3&&D(k[b],k[j]))}if(g)P.explodeTime--,0==P.explodeTime&&(--w<0?(P.dead=!0,S="Game Over",N=1):P=G());else{if(0==P.blinkNum&&!P.dead)for(var b=0;b<k.length;b++)if(A(P.x,P.y,k[b].x,k[b].y)<P.r+k[b].r){E(),C(b);break}P.a+=P.rot,P.x+=P.thrust.x,P.y+=P.thrust.y}P.x<0-P.r?P.x=I.width+P.r:P.x>I.width+P.r&&(P.x=0-P.r);P.y<0-P.r?P.y=I.height+P.r:P.y>I.height+P.r&&(P.y=0-P.r);for(var b=P.lasers.length-1;b>=0;b--)P.lasers[b].dist>h*I.width?P.lasers.splice(b,1):(P.lasers[b].x+=P.lasers[b].xv,P.lasers[b].y+=P.lasers[b].yv,P.lasers[b].dist+=Math.sqrt(Math.pow(P.lasers[b].xv,2)+Math.pow(P.lasers[b].yv,2)),P.lasers[b].x<0?P.lasers[b].x=I.width:P.lasers[b].x>I.width&&(P.lasers[b].x=0),P.lasers[b].y<0?P.lasers[b].y=I.height:P.lasers[b].y>I.height&&(P.lasers[b].y=0));for(var b=0;b<k.length;b++)k[b].x+=k[b].xv,k[b].y+=k[b].yv,k[b].x<0-k[b].r?k[b].x=I.width+k[b].r:k[b].x>I.width+k[b].r&&(k[b].x=0-k[b].r),k[b].y<0-k[b].r?k[b].y=I.height+k[b].r:k[b].y>I.height+k[b].r&&(k[b].y=0-k[b].r)},1e3/e)}]);